@vcr
Feature: CLI

  Scenario: Get version
    When I run `multichain -v`
    Then the output should contain "multichain version"

  Scenario: Encode a string
    When I successfully run `multichain hexify http://heyre.be/snake/weight.json`
    Then the output should contain "c687474703a2f2f68657972652e62652f736e616b652f7765696768742e6a736f6e7c7b22416363657074223a226170706c69636174696f6e2f6a736f6e227d7c66326237316533366164623235343862313038643565616661633361363133353837616463643833343966633561346464616536643963336136363330636266"

  Scenario: Decode a string
    When I successfully run `multichain dehexify 313435313938393638387c687474703a2f2f68657972652e62652f636174666163652e6a736f6e7c7b22416363657074223a226170706c69636174696f6e2f6a736f6e227d7c32396162313039356137626662656132356137646439373335393333316663636630666634323036373238316664326232356134633030353536326234623463`
    Then the output should contain "1451989688|http://heyre.be/catface.json|"
    And the output should contain "application/json"
    And the output should contain "|29ab1095a7bfbea25a7dd97359331fccf0ff42067281fd2b25a4c005562b4b4c"

  Scenario: Verify an entry
    When I successfully run `multichain verify 313435313938393638387c687474703a2f2f68657972652e62652f636174666163652e6a736f6e7c7b22416363657074223a226170706c69636174696f6e2f6a736f6e227d7c32396162313039356137626662656132356137646439373335393333316663636630666634323036373238316664326232356134633030353536326234623463`
    Then the output should contain "'http://heyre.be/catface.json' is verified"
    And the exit status should be 0

  Scenario: Do not verify a duff entry
    When I run `multichain verify 313435313938393638387c687474703a2f2f68657972652e62652f636174666163652e6a736f6e7c7b22416363657074223a226170706c69636174696f6e2f6a736f6e227d7c3239616231303935613762666265613235613764643937333539333331666363663066663432303637323831666432623235613463303035353632623462346`
    Then the output should contain "'http://heyre.be/catface.json' is not verified"
    And the exit status should be 1
